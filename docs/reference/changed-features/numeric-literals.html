<html><head><meta charset="utf-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><title>Numeric Literals</title><link rel="shortcut icon" type="image/x-icon" href="../../../favicon.ico"></link><script type="text/javascript" src="../../../scripts/clipboard.js" defer="true"></script><script type="text/javascript" src="../../../scripts/platform-content-handler.js" defer="true"></script><script type="text/javascript" src="../../../scripts/main.js" defer="true"></script><link rel="stylesheet" href="../../../styles/nord-light.css"></link><link rel="stylesheet" href="../../../styles/scalastyle.css"></link><link rel="stylesheet" href="../../../styles/dotty-icons.css"></link><link rel="stylesheet" href="../../../styles/diagram.css"></link><link rel="stylesheet" href="../../../styles/filter-bar.css"></link><link rel="stylesheet" href="../../../styles/search-bar.css"></link><script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js" defer="true"></script><script type="text/javascript" src="https://d3js.org/d3.v6.min.js" defer="true"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/graphlib-dot@0.6.2/dist/graphlib-dot.min.js" defer="true"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dagre-d3/0.6.1/dagre-d3.min.js" defer="true"></script><link rel="stylesheet" href="../../../styles/filter-bar.css"></link><script type="text/javascript" src="../../../hljs/highlight.pack.js" defer="true"></script><script type="text/javascript" src="../../../scripts/hljs-scala3.js" defer="true"></script><script type="text/javascript" src="../../../scripts/ux.js" defer="true"></script><script type="text/javascript" src="../../../scripts/common/component.js" defer="true"></script><script type="text/javascript" src="../../../scripts/common/utils.js" defer="true"></script><script type="text/javascript" src="../../../scripts/components/FilterBar.js" defer="true"></script><script type="text/javascript" src="../../../scripts/components/DocumentableList.js" defer="true"></script><script type="text/javascript" src="../../../scripts/components/Input.js" defer="true"></script><script type="text/javascript" src="../../../scripts/components/FilterGroup.js" defer="true"></script><script type="text/javascript" src="../../../scripts/components/Filter.js" defer="true"></script><script type="text/javascript" src="../../../scripts/data.js" defer="true"></script><link rel="stylesheet" href="../../../css/bootstrap.min.css"></link><link rel="stylesheet" href="../../../css/dottydoc.css"></link><link rel="stylesheet" href="../../../css/color-brewer.css"></link><script type="text/javascript" src="../../../js/jquery.min.js" defer="true"></script><script type="text/javascript" src="../../../js/bootstrap.min.js" defer="true"></script><script>var pathToRoot = "../../../";</script></head><body><div id="container"><div id="leftColumn"><div id="logo"><span><img src="../../../project-logo/logo.svg"></img></span><span><div class="projectName">Scala 3</div></span><span><div class="projectVersion">3.0.0-RC1-bin-20201224-2a32d6a-NIGHTLY</div></span></div><div id="paneSearch"></div><nav id="sideMenu2"><div class="expanded"><a href="../../../index.html">Scala 3</a><span></span><div><a href="../../../blog/index.html">Blog</a><span></span><div><a href="../../../blog/2020/12/18/scala3-m3.html">Scala 3.0.0-M3: developer&apos;s preview before RC1</a></div><div><a href="../../../blog/2020/11/09/scala3-m1.html">Scala 3.0.0-M1 is here</a></div><div><a href="../../../blog/2020/09/21/naming-schema-change.html">Dotty becomes Scala 3</a></div><div><a href="../../../blog/2020/08/31/27th-dotty-milestone-release.html">Announcing Dotty 0.27.0-RC1 - ScalaJS, performance, stability</a></div><div><a href="../../../blog/2020/07/27/26th-dotty-milestone-release.html">Announcing Dotty 0.26.0-RC1 - unified extension methods and more</a></div><div><a href="../../../blog/2020/06/22/25th-dotty-milestone-release.html">Announcing Dotty 0.25.0-RC2 - speed-up of givens and change in the tuple API</a></div><div><a href="../../../blog/2020/04/29/24th-dotty-milestone-release.html">Announcing Dotty 0.24.0-RC1 - 2.13.2 standard library, better error messages and more</a></div><div><a href="../../../blog/2020/03/18/23rd-dotty-milestone-release.html">Announcing Dotty 0.23.0-RC1 - safe initialization checks, type-level bitwise operations and more</a></div><div><a href="../../../blog/2020/02/05/22nd-dotty-milestone-release.html">Announcing Dotty 0.22.0-RC1 - syntactic enhancements, type-level arithmetic and more</a></div><div><a href="../../../blog/2019/12/20/21th-dotty-milestone-release.html">Announcing Dotty 0.21.0-RC1 - explicit nulls, new syntax for `match` and conditional givens, and more</a></div><div><a href="../../../blog/2019/11/04/20th-dotty-milestone-release.html">Announcing Dotty 0.20.0-RC1 – `with` starting indentation blocks, inline given specializations and more</a></div><div><a href="../../../blog/2019/09/23/19th-dotty-milestone-release.html">Announcing Dotty 0.19.0-RC1 – further refinements of the syntax and the migration to 2.13.1 standard library</a></div><div><a href="../../../blog/2019/08/30/18th-dotty-milestone-release.html">Announcing Dotty 0.18.1-RC1 – switch to the 2.13 standard library, indentation-based syntax and other experiments</a></div><div><a href="../../../blog/2019/07/25/17th-dotty-milestone-release.html">Announcing Dotty 0.17.0-RC1 – new implicit scoping rules and more</a></div><div><a href="../../../blog/2019/06/11/16th-dotty-milestone-release.html">Announcing Dotty 0.16.0-RC3 – the Scala Days 2019 Release</a></div><div><a href="../../../blog/2019/05/23/15th-dotty-milestone-release.html">Announcing Dotty 0.15.0-RC1 – the fully bootstrapped compiler</a></div><div><a href="../../../blog/2019/04/15/14th-dotty-milestone-release.html">Announcing Dotty 0.14.0-RC1 with export, immutable arrays, creator applications and more</a></div><div><a href="../../../blog/2019/03/05/13th-dotty-milestone-release.html">Announcing Dotty 0.13.0-RC1 with Spark support, top level definitions and redesigned implicits</a></div><div><a href="../../../blog/2019/01/21/12th-dotty-milestone-release.html">Announcing Dotty 0.12.0-RC1</a></div><div><a href="../../../blog/2018/11/30/11th-dotty-milestone-release.html">Announcing Dotty 0.11.0-RC1</a></div><div><a href="../../../blog/2018/10/10/10th-dotty-milestone-release.html">Announcing Dotty 0.10.0-RC1</a></div><div><a href="../../../blog/2018/07/06/ninth-dotty-milestone-release.html">Announcing Dotty 0.9.0-RC1</a></div><div><a href="../../../blog/2018/04/27/eighth-dotty-milestone-release.html">Announcing Dotty 0.7.0 and 0.8.0-RC1</a></div><div><a href="../../../blog/2018/03/05/seventh-dotty-milestone-release.html">Announcing Dotty 0.6.0 and 0.7.0-RC1</a></div><div><a href="../../../blog/2017/12/01/fifth-dotty-milestone-release.html">Announcing Dotty 0.5.0-RC1</a></div><div><a href="../../../blog/2017/10/16/fourth-dotty-milestone-release.html">Announcing Dotty 0.4.0-RC1</a></div><div><a href="../../../blog/2017/09/07/third-dotty-milestone-release.html">Announcing Dotty 0.3.0-RC2</a></div><div><a href="../../../blog/2017/07/12/second-dotty-milestone-release.html">Announcing Dotty 0.2.0-RC1, with new optimizations, improved stability and IDE support</a></div><div><a href="../../../blog/2017/05/31/first-dotty-milestone-release.html">Announcing Dotty 0.1.2-RC1, a major step towards Scala 3</a></div><div><a href="../../../blog/2016/12/05/implicit-function-types.html">Implicit Function Types</a></div><div><a href="../../../blog/2016/05/05/multiversal-equality.html">Multiversal Equality for Scala</a></div><div><a href="../../../blog/2016/02/17/scaling-dot-soundness.html">Scaling DOT to Scala - Soundness</a></div><div><a href="../../../blog/2016/02/03/essence-of-scala.html">The Essence of Scala</a></div><div><a href="../../../blog/2016/01/02/new-year-resolutions.html">New Year Resolutions</a></div><div><a href="../../../blog/2015/10/23/dotty-compiler-bootstraps.html">We got liftoff!</a></div></div><div><a href="../../Usage/index.html">Usage</a><span></span><div><a href="../../usage/getting-started.html">Getting Started: Users</a></div><div><a href="../../usage/sbt-projects.html">Using Dotty with sbt</a></div><div><a href="../../usage/ide-support.html">IDE support for Dotty</a></div><div><a href="../../usage/worksheet-mode.html">Worksheet mode with Dotty IDE</a></div><div><a href="../../usage/language-versions.html">Language Versions</a></div><div><a href="../../usage/cbt-projects.html">Using Dotty with cbt</a></div><div><a href="../../usage/scala3doc/index.html">Scala3doc</a><span></span><div><a href="../../usage/scala3doc/blog.html">Built-in blog</a></div><div><a href="../../usage/scala3doc/specificTags.html">Scala3doc-specific Tags and Features</a></div><div><a href="../../usage/scala3doc/staticSite.html">Static docucmentation</a></div><div><a href="../../usage/scala3doc/docComments.html">API Documentation</a></div></div><div><a href="../../usage/dottydoc.html">Dottydoc [Legacy]</a></div></div><div class="expanded"><a href="../../Reference/index.html">Reference</a><span></span><div><a href="../overview.html">Overview</a></div><div><a href="../../New Types/index.html">New Types</a><span></span><div><a href="../new-types/intersection-types.html">Intersection Types</a></div><div><a href="../new-types/union-types.html">Union Types</a></div><div><a href="../new-types/type-lambdas.html">Type Lambdas</a></div><div><a href="../new-types/match-types.html">Match Types</a></div><div><a href="../new-types/dependent-function-types.html">Dependent Function Types</a></div><div><a href="../new-types/polymorphic-function-types.html">Polymorphic Function Types</a></div></div><div><a href="../../Enums/index.html">Enums</a><span></span><div><a href="../enums/enums.html">Enumerations</a></div><div><a href="../enums/adts.html">Algebraic Data Types</a></div><div><a href="../enums/desugarEnums.html">Translation of Enums and ADTs</a></div></div><div><a href="../../Contextual Abstractions/index.html">Contextual Abstractions</a><span></span><div><a href="../contextual/motivation.html">Overview</a></div><div><a href="../contextual/givens.html">Given Instances</a></div><div><a href="../contextual/using-clauses.html">Using Clauses</a></div><div><a href="../contextual/context-bounds.html">Context Bounds</a></div><div><a href="../contextual/given-imports.html">Importing Givens</a></div><div><a href="../contextual/extension-methods.html">Extension Methods</a></div><div><a href="../contextual/type-classes.html">Implementing Type classes</a></div><div><a href="../contextual/derivation.html">Type Class Derivation</a></div><div><a href="../contextual/multiversal-equality.html">Multiversal Equality</a></div><div><a href="../contextual/context-functions.html">Context Functions</a></div><div><a href="../contextual/conversions.html">Implicit Conversions</a></div><div><a href="../contextual/by-name-context-parameters.html">By-Name Context Parameters</a></div><div><a href="../contextual/relationship-implicits.html">Relationship with Scala 2 Implicits</a></div></div><div><a href="../../Metaprogramming/index.html">Metaprogramming</a><span></span><div><a href="../metaprogramming/toc.html">Overview</a></div><div><a href="../metaprogramming/inline.html">Inline</a></div><div><a href="../metaprogramming/macros.html">Macros</a></div><div><a href="../metaprogramming/staging.html">Multi-Stage Programming</a></div><div><a href="../metaprogramming/tasty-reflect.html">TASTy Reflect</a></div><div><a href="../metaprogramming/tasty-inspect.html">TASTy Inspection</a></div></div><div><a href="../../Other New Features/index.html">Other New Features</a><span></span><div><a href="../other-new-features/trait-parameters.html">Trait Parameters</a></div><div><a href="../other-new-features/transparent-traits.html">Transparent Traits</a></div><div><a href="../other-new-features/creator-applications.html">Universal Apply Methods</a></div><div><a href="../other-new-features/export.html">Export Clauses</a></div><div><a href="../other-new-features/opaques.html">Opaque Type Aliases</a></div><div><a href="../other-new-features/open-classes.html">Open Classes</a></div><div><a href="../other-new-features/parameter-untupling.html">Parameter Untupling</a></div><div><a href="../other-new-features/kind-polymorphism.html">Kind Polymorphism</a></div><div><a href="../other-new-features/matchable.html">The Matchable Trait</a></div><div><a href="../other-new-features/threadUnsafe-annotation.html">threadUnsafe annotation</a></div><div><a href="../other-new-features/targetName.html">The @targetName annotation</a></div><div><a href="../other-new-features/control-syntax.html">New Control Syntax</a></div><div><a href="../other-new-features/indentation.html">Optional Braces</a></div><div><a href="../other-new-features/explicit-nulls.html">Explicit Nulls</a></div><div><a href="../other-new-features/safe-initialization.html">Safe Initialization</a></div></div><div class="expanded"><a href="../../Other Changed Features/index.html">Other Changed Features</a><span></span><div><a href="" class="selected expanded">Numeric Literals</a></div><div><a href="structural-types.html">Programmatic Structural Types</a></div><div><a href="operators.html">Rules for Operators</a></div><div><a href="wildcards.html">Wildcard Arguments in Types</a></div><div><a href="type-checking.html">Changes in Type Checking</a></div><div><a href="type-inference.html">Changes in Type Inference</a></div><div><a href="implicit-resolution.html">Changes in Implicit Resolution</a></div><div><a href="implicit-conversions.html">Implicit Conversions</a></div><div><a href="overload-resolution.html">Changes in Overload Resolution</a></div><div><a href="match-syntax.html">Match Expressions</a></div><div><a href="vararg-patterns.html">Vararg Patterns</a></div><div><a href="pattern-bindings.html">Pattern Bindings</a></div><div><a href="pattern-matching.html">Option-less pattern matching</a></div><div><a href="eta-expansion.html">Automatic Eta Expansion</a></div><div><a href="compiler-plugins.html">Changes in Compiler Plugins</a></div><div><a href="lazy-vals-init.html">Lazy Vals initialization</a></div><div><a href="main-functions.html">Main Methods</a></div></div><div><a href="../../Dropped Features/index.html">Dropped Features</a><span></span><div><a href="../dropped-features/delayed-init.html">Dropped: Delayedinit</a></div><div><a href="../dropped-features/macros.html">Dropped: Scala 2 Macros</a></div><div><a href="../dropped-features/existential-types.html">Dropped: Existential Types</a></div><div><a href="../dropped-features/type-projection.html">Dropped: General Type Projection</a></div><div><a href="../dropped-features/do-while.html">Dropped: Do-While</a></div><div><a href="../dropped-features/procedure-syntax.html">Dropped: Procedure Syntax</a></div><div><a href="../dropped-features/package-objects.html">Dropped: Package Objects</a></div><div><a href="../dropped-features/early-initializers.html">Dropped: Early Initializers</a></div><div><a href="../dropped-features/class-shadowing.html">Dropped: Class Shadowing</a></div><div><a href="../dropped-features/limit22.html">Dropped: Limit 22</a></div><div><a href="../dropped-features/xml.html">Dropped: XML Literals</a></div><div><a href="../dropped-features/symlits.html">Dropped: Symbol Literals</a></div><div><a href="../dropped-features/auto-apply.html">Dropped: Auto-Application</a></div><div><a href="../dropped-features/weak-conformance.html">Dropped: Weak Conformance</a></div><div><a href="../dropped-features/nonlocal-returns.html">Deprecated: Nonlocal Returns</a></div><div><a href="../dropped-features/this-qualifier.html">Dropped: private[this] and protected[this]</a></div></div><div><a href="../syntax.html">Scala 3 Syntax Summary</a></div></div><div><a href="../../Contributing/index.html">Contributing</a><span></span><div><a href="../../contributing/contribute-knowledge.html">Contributing Knowledge</a></div><div><a href="../../contributing/getting-started.html">Getting Started</a></div><div><a href="../../contributing/workflow.html">Workflow</a></div><div><a href="../../contributing/testing.html">Testing in Dotty</a></div><div><a href="../../contributing/debugging.html">Debugging Techniques</a></div><div><a href="../../IDEs and Tools/index.html">IDEs and Tools</a><span></span><div><a href="../../contributing/tools/mill.html">Basic Operations with Mill</a></div><div><a href="../../contributing/tools/scalafix.html">Working with Scalafix</a></div></div><div><a href="../../Procedures/index.html">Procedures</a><span></span><div><a href="../../contributing/procedures/release.html">Release Procedure</a></div><div><a href="../../contributing/procedures/vulpix.html">Test Vulpix Framework</a></div></div></div><div><a href="../../Internals/index.html">Internals</a><span></span><div><a href="../../internals/backend.html">Backend Internals</a></div><div><a href="../../internals/classpaths.html">Classpaths</a></div><div><a href="../../internals/core-data-structures.html">Core Data Structures</a></div><div><a href="../../internals/contexts.html">Contexts</a></div><div><a href="../../internals/dotc-scalac.html">Differences between Scalac and Dotty</a></div><div><a href="../../internals/higher-kinded-v2.html">Higher-Kinded Types in Dotty</a></div><div><a href="../../internals/overall-structure.html">Dotty Overall Structure</a></div><div><a href="../../internals/periods.html">Dotc&apos;s concept of time</a></div><div><a href="../../internals/syntax.html">Scala 3 Syntax Summary</a></div><div><a href="../../internals/type-system.html">Type System</a></div><div><a href="../../internals/dotty-internals-1-notes.html">Dotty Internals 1: Trees &amp; Symbols (Meeting Notes)</a></div><div><a href="../../internals/debug-macros.html">Debug Macros</a></div></div><div><a href="../../Resources/index.html">Resources</a><span></span><div><a href="../../resources/talks.html">Talks</a></div></div><div><a href="../../../api/index.html">API</a><span></span><div><a href="../../../api/dotty/tools/tasty.html">dotty.tools.tasty</a></div><div><a href="../../../api/dotty/tools/tasty/util.html">dotty.tools.tasty.util</a></div><div><a href="../../../api/scala.html">scala</a></div><div><a href="../../../api/scala/annotation.html">scala.annotation</a></div><div><a href="../../../api/scala/annotation/meta.html">scala.annotation.meta</a></div><div><a href="../../../api/scala/annotation/unchecked.html">scala.annotation.unchecked</a></div><div><a href="../../../api/scala/beans.html">scala.beans</a></div><div><a href="../../../api/scala/collection.html">scala.collection</a></div><div><a href="../../../api/scala/collection/concurrent.html">scala.collection.concurrent</a></div><div><a href="../../../api/scala/collection/convert.html">scala.collection.convert</a></div><div><a href="../../../api/scala/collection/generic.html">scala.collection.generic</a></div><div><a href="../../../api/scala/collection/immutable.html">scala.collection.immutable</a></div><div><a href="../../../api/scala/collection/mutable.html">scala.collection.mutable</a></div><div><a href="../../../api/scala/compat.html">scala.compat</a></div><div><a href="../../../api/scala/compiletime.html">scala.compiletime</a></div><div><a href="../../../api/scala/compiletime/ops.html">scala.compiletime.ops</a></div><div><a href="../../../api/scala/compiletime/testing.html">scala.compiletime.testing</a></div><div><a href="../../../api/scala/concurrent.html">scala.concurrent</a></div><div><a href="../../../api/scala/concurrent/duration.html">scala.concurrent.duration</a></div><div><a href="../../../api/scala/deriving.html">scala.deriving</a></div><div><a href="../../../api/scala/io.html">scala.io</a></div><div><a href="../../../api/scala/jdk.html">scala.jdk</a></div><div><a href="../../../api/scala/jdk/javaapi.html">scala.jdk.javaapi</a></div><div><a href="../../../api/scala/math.html">scala.math</a></div><div><a href="../../../api/scala/quoted.html">scala.quoted</a></div><div><a href="../../../api/scala/quoted/runtime.html">scala.quoted.runtime</a></div><div><a href="../../../api/scala/ref.html">scala.ref</a></div><div><a href="../../../api/scala/reflect.html">scala.reflect</a></div><div><a href="../../../api/scala/reflect/macros.html">scala.reflect.macros</a></div><div><a href="../../../api/scala/runtime.html">scala.runtime</a></div><div><a href="../../../api/scala/runtime/java8.html">scala.runtime.java8</a></div><div><a href="../../../api/scala/sys.html">scala.sys</a></div><div><a href="../../../api/scala/sys/process.html">scala.sys.process</a></div><div><a href="../../../api/scala/util.html">scala.util</a></div><div><a href="../../../api/scala/util/control.html">scala.util.control</a></div><div><a href="../../../api/scala/util/hashing.html">scala.util.hashing</a></div><div><a href="../../../api/scala/util/matching.html">scala.util.matching</a></div></div></div></nav></div><div id="main"><div id="leftToggler"><span class="icon-toggler"></span></div><div id="searchBar"></div><main>
  <div id="content" pageIds="docs.reference.changed-features.numeric-literals.md////PointingToDeclaration//-1640042253">
    <div class="breadcrumbs"><a href="../../index.html">Scala 3</a>/<a href="../../Reference/index.html">Reference</a>/<a href="../../Other Changed Features/index.html">Other Changed Features</a>/<a href="">Numeric Literals</a></div>
<html>
 <head>
  <link rel="dns-prefetch" href="//fonts.googleapis.com"> 
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin> 
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css"> 
 </head>
 <body>
  <div id="content-wrapper"> 
   <main class="container"> 
    <header> 
     <h1>Numeric Literals</h1> 
     <div class="byline"> <a href="https://github.com/lampepfl/dotty/edit/master/docs/docs/reference/changed-features/numeric-literals.md"> <i class="far fa-edit"></i> Edit this page on GitHub </a> 
     </div> 
    </header> 
    <p><strong>Note</strong>: This feature is not yet part of the Scala 3 language definition. It can be made available by a language import:</p> 
    <pre><code class="language-scala">import scala.language.experimental.genericNumberLiterals
</code></pre> 
    <p>In Scala 2, numeric literals were confined to the primitive numeric types <code>Int</code>, <code>Long</code>, <code>Float</code>, and <code>Double</code>. Scala 3 allows to write numeric literals also for user defined types. Example:</p> 
    <pre><code class="language-scala">val x: Long = -10_000_000_000
val y: BigInt = 0x123_abc_789_def_345_678_901
val z: BigDecimal = 110_222_799_799.99

(y: BigInt) match
   case 123_456_789_012_345_678_901 =&gt;
</code></pre> 
    <p>The syntax of numeric literals is the same as before, except there are no pre-set limits how large they can be.</p> 
    <h3><a href="#meaning-of-numeric-literals" id="meaning-of-numeric-literals" class="anchor"></a>Meaning of Numeric Literals</h3> 
    <p>The meaning of a numeric literal is determined as follows:</p> 
    <ul> 
     <li>If the literal ends with <code>l</code> or <code>L</code>, it is a <code>Long</code> integer (and must fit in its legal range).</li> 
     <li>If the literal ends with <code>f</code> or <code>F</code>, it is a single precision floating point number of type <code>Float</code>.</li> 
     <li>If the literal ends with <code>d</code> or <code>D</code>, it is a double precision floating point number of type <code>Double</code>.</li> 
    </ul> 
    <p>In each of these cases the conversion to a number is exactly as in Scala 2 or in Java. If a numeric literal does <em>not</em> end in one of these suffixes, its meaning is determined by the expected type:</p> 
    <ol> 
     <li>If the expected type is <code>Int</code>, <code>Long</code>, <code>Float</code>, or <code>Double</code>, the literal is treated as a standard literal of that type.</li> 
     <li>If the expected type is a fully defined type <code>T</code> that has a given instance of type <code>scala.util.FromDigits[T]</code>, the literal is converted to a value of type <code>T</code> by passing it as an argument to the <code>fromDigits</code> method of that instance (more details below).</li> 
     <li>Otherwise, the literal is treated as a <code>Double</code> literal (if it has a decimal point or an exponent), or as an <code>Int</code> literal (if not). (This last possibility is again as in Scala 2 or Java.)</li> 
    </ol> 
    <p>With these rules, the definition</p> 
    <pre><code class="language-scala">val x: Long = -10_000_000_000
</code></pre> 
    <p>is legal by rule (1), since the expected type is <code>Long</code>. The definitions</p> 
    <pre><code class="language-scala">val y: BigInt = 0x123_abc_789_def_345_678_901
val z: BigDecimal = 111222333444.55
</code></pre> 
    <p>are legal by rule (2), since both <code>BigInt</code> and <code>BigDecimal</code> have <code>FromDigits</code> instances (which implement the <code>FromDigits</code> subclasses <code>FromDigits.WithRadix</code> and <code>FromDigits.Decimal</code>, respectively). On the other hand,</p> 
    <pre><code class="language-scala">val x = -10_000_000_000
</code></pre> 
    <p>gives a type error, since without an expected type <code>-10_000_000_000</code> is treated by rule (3) as an <code>Int</code> literal, but it is too large for that type.</p> 
    <h3><a href="#the-fromdigits-trait" id="the-fromdigits-trait" class="anchor"></a>The FromDigits Trait</h3> 
    <p>To allow numeric literals, a type simply has to define a <code>given</code> instance of the <code>scala.util.FromDigits</code> type class, or one of its subclasses. <code>FromDigits</code> is defined as follows:</p> 
    <pre><code class="language-scala">trait FromDigits[T]:
   def fromDigits(digits: String): T
</code></pre> 
    <p>Implementations of the <code>fromDigits</code> convert strings of digits to the values of the implementation type <code>T</code>. The <code>digits</code> string consists of digits between <code>0</code> and <code>9</code>, possibly preceded by a sign ("+" or "-"). Number separator characters <code>_</code> are filtered out before the string is passed to <code>fromDigits</code>.</p> 
    <p>The companion object <code>FromDigits</code> also defines subclasses of <code>FromDigits</code> for whole numbers with a given radix, for numbers with a decimal point, and for numbers that can have both a decimal point and an exponent:</p> 
    <pre><code class="language-scala">object FromDigits:

   /** A subclass of `FromDigits` that also allows to convert whole
    *  number literals with a radix other than 10
    */
   trait WithRadix[T] extends FromDigits[T]:
      def fromDigits(digits: String): T = fromDigits(digits, 10)
      def fromDigits(digits: String, radix: Int): T

   /** A subclass of `FromDigits` that also allows to convert number
    *  literals containing a decimal point ".".
    */
   trait Decimal[T] extends FromDigits[T]

   /** A subclass of `FromDigits`that allows also to convert number
    *  literals containing a decimal point "." or an
    *  exponent `('e' | 'E')['+' | '-']digit digit*`.
    */
   trait Floating[T] extends Decimal[T]
</code></pre> 
    <p>A user-defined number type can implement one of those, which signals to the compiler that hexadecimal numbers, decimal points, or exponents are also accepted in literals for this type.</p> 
    <h3><a href="#error-handling" id="error-handling" class="anchor"></a>Error Handling</h3> 
    <p><code>FromDigits</code> implementations can signal errors by throwing exceptions of some subtype of <code>FromDigitsException</code>. <code>FromDigitsException</code> is defined with three subclasses in the <code>FromDigits</code> object as follows:</p> 
    <pre><code class="language-scala">abstract class FromDigitsException(msg: String) extends NumberFormatException(msg)

class NumberTooLarge (msg: String = "number too large")         extends FromDigitsException(msg)
class NumberTooSmall (msg: String = "number too small")         extends FromDigitsException(msg)
class MalformedNumber(msg: String = "malformed number literal") extends FromDigitsException(msg)
</code></pre> 
    <h3><a href="#example" id="example" class="anchor"></a>Example</h3> 
    <p>As a fully worked out example, here is an implementation of a new numeric class, <code>BigFloat</code>, that accepts numeric literals. <code>BigFloat</code> is defined in terms of a <code>BigInt</code> mantissa and an <code>Int</code> exponent:</p> 
    <pre><code class="language-scala">case class BigFloat(mantissa: BigInt, exponent: Int):
   override def toString = s"${mantissa}e${exponent}"
</code></pre> 
    <p><code>BigFloat</code> literals can have a decimal point as well as an exponent. E.g. the following expression should produce the <code>BigFloat</code> number <code>BigFloat(-123, 997)</code>:</p> 
    <pre><code class="language-scala">-0.123E+1000: BigFloat
</code></pre> 
    <p>The companion object of <code>BigFloat</code> defines an <code>apply</code> constructor method to construct a <code>BigFloat</code> from a <code>digits</code> string. Here is a possible implementation:</p> 
    <pre><code class="language-scala">object BigFloat:
   import scala.util.FromDigits

   def apply(digits: String): BigFloat =
      val (mantissaDigits, givenExponent) =
         digits.toUpperCase.split('E') match
            case Array(mantissaDigits, edigits) =&gt;
               val expo =
                  try FromDigits.intFromDigits(edigits)
                  catch case ex: FromDigits.NumberTooLarge =&gt;
                     throw FromDigits.NumberTooLarge(s"exponent too large: $edigits")
               (mantissaDigits, expo)
            case Array(mantissaDigits) =&gt;
               (mantissaDigits, 0)
      val (intPart, exponent) =
         mantissaDigits.split('.') match
            case Array(intPart, decimalPart) =&gt;
               (intPart ++ decimalPart, givenExponent - decimalPart.length)
            case Array(intPart) =&gt;
               (intPart, givenExponent)
      BigFloat(BigInt(intPart), exponent)
</code></pre> 
    <p>To accept <code>BigFloat</code> literals, all that's needed in addition is a <code>given</code> instance of type <code>FromDigits.Floating[BigFloat]</code>:</p> 
    <pre><code class="language-scala">   given FromDigits: FromDigits.Floating[BigFloat] with
      def fromDigits(digits: String) = apply(digits)
end BigFloat
</code></pre> 
    <p>Note that the <code>apply</code> method does not check the format of the <code>digits</code> argument. It is assumed that only valid arguments are passed. For calls coming from the compiler that assumption is valid, since the compiler will first check whether a numeric literal has the correct format before it gets passed on to a conversion method.</p> 
    <h3><a href="#compile-time-errors" id="compile-time-errors" class="anchor"></a>Compile-Time Errors</h3> 
    <p>With the setup of the previous section, a literal like</p> 
    <pre><code class="language-scala">1e10_0000_000_000: BigFloat
</code></pre> 
    <p>would be expanded by the compiler to</p> 
    <pre><code class="language-scala">BigFloat.FromDigits.fromDigits("1e100000000000")
</code></pre> 
    <p>Evaluating this expression throws a <code>NumberTooLarge</code> exception at run time. We would like it to produce a compile-time error instead. We can achieve this by tweaking the <code>BigFloat</code> class with a small dose of metaprogramming. The idea is to turn the <code>fromDigits</code> method into a macro, i.e. make it an inline method with a splice as right hand side. To do this, replace the <code>FromDigits</code> instance in the <code>BigFloat</code> object by the following two definitions:</p> 
    <pre><code class="language-scala">object BigFloat:
   ...

   class FromDigits extends FromDigits.Floating[BigFloat]:
      def fromDigits(digits: String) = apply(digits)

   given FromDigits:
      override inline def fromDigits(digits: String) = ${
        fromDigitsImpl('digits)
      }
</code></pre> 
    <p>Note that an inline method cannot directly fill in for an abstract method, since it produces no code that can be executed at runtime. That is why we define an intermediary class <code>FromDigits</code> that contains a fallback implementation which is then overridden by the inline method in the <code>FromDigits</code> given instance. That method is defined in terms of a macro implementation method <code>fromDigitsImpl</code>. Here is its definition:</p> 
    <pre><code class="language-scala">   private def fromDigitsImpl(digits: Expr[String])(using ctx: Quotes): Expr[BigFloat] =
      digits.value match
         case Some(ds) =&gt;
            try
               val BigFloat(m, e) = apply(ds)
               '{BigFloat(${Expr(m)}, ${Expr(e)})}
            catch case ex: FromDigits.FromDigitsException =&gt;
               ctx.error(ex.getMessage)
               '{BigFloat(0, 0)}
         case None =&gt;
            '{apply($digits)}
end BigFloat
</code></pre> 
    <p>The macro implementation takes an argument of type <code>Expr[String]</code> and yields a result of type <code>Expr[BigFloat]</code>. It tests whether its argument is a constant string. If that is the case, it converts the string using the <code>apply</code> method and lifts the resulting <code>BigFloat</code> back to <code>Expr</code> level. For non-constant strings <code>fromDigitsImpl(digits)</code> is simply <code>apply(digits)</code>, i.e. everything is evaluated at runtime in this case.</p> 
    <p>The interesting part is the <code>catch</code> part of the case where <code>digits</code> is constant. If the <code>apply</code> method throws a <code>FromDigitsException</code>, the exception's message is issued as a compile time error in the <code>ctx.error(ex.getMessage)</code> call.</p> 
    <p>With this new implementation, a definition like</p> 
    <pre><code class="language-scala">val x: BigFloat = 1234.45e3333333333
</code></pre> 
    <p>would give a compile time error message:</p> 
    <pre><code class="language-scala">3 |  val x: BigFloat = 1234.45e3333333333
  |                    ^^^^^^^^^^^^^^^^^^
  |                    exponent too large: 3333333333
</code></pre> 
   </main> 
  </div> 
  <script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'lampepfl/dotty'
  };
</script> 
  <script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
 </body>
</html>  </div>
</main><footer><span class="go-to-top-icon"><a href="#container"><span class="icon-vertical_align_top"></span>&nbsp;Back to top</a></span>Generated by&nbsp;<a href="https://github.com/lampepfl/dotty/tree/master/scala3doc"><img src="../../../images/scala3doc_logo.svg" alt="Scala3doc" class="scala3doc_logo"></img></a></footer></div></div><script type="text/javascript" src="../../../scripts/pages.js"></script><script type="text/javascript" src="../../../scripts/main.js"></script></body></html>
