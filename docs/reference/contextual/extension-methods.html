<html><head><meta charset="utf-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><title>Extension Methods</title><link rel="shortcut icon" type="image/x-icon" href="../../../favicon.ico"></link><script type="text/javascript" src="../../../scripts/clipboard.js" defer="true"></script><script type="text/javascript" src="../../../scripts/platform-content-handler.js" defer="true"></script><script type="text/javascript" src="../../../scripts/main.js" defer="true"></script><link rel="stylesheet" href="../../../styles/nord-light.css"></link><link rel="stylesheet" href="../../../styles/scalastyle.css"></link><link rel="stylesheet" href="../../../styles/dotty-icons.css"></link><link rel="stylesheet" href="../../../styles/diagram.css"></link><link rel="stylesheet" href="../../../styles/filter-bar.css"></link><link rel="stylesheet" href="../../../styles/search-bar.css"></link><script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js" defer="true"></script><script type="text/javascript" src="https://d3js.org/d3.v6.min.js" defer="true"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/graphlib-dot@0.6.2/dist/graphlib-dot.min.js" defer="true"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dagre-d3/0.6.1/dagre-d3.min.js" defer="true"></script><link rel="stylesheet" href="../../../styles/filter-bar.css"></link><script type="text/javascript" src="../../../hljs/highlight.pack.js" defer="true"></script><script type="text/javascript" src="../../../scripts/hljs-scala3.js" defer="true"></script><script type="text/javascript" src="../../../scripts/ux.js" defer="true"></script><script type="text/javascript" src="../../../scripts/common/component.js" defer="true"></script><script type="text/javascript" src="../../../scripts/common/utils.js" defer="true"></script><script type="text/javascript" src="../../../scripts/components/FilterBar.js" defer="true"></script><script type="text/javascript" src="../../../scripts/components/DocumentableList.js" defer="true"></script><script type="text/javascript" src="../../../scripts/components/Input.js" defer="true"></script><script type="text/javascript" src="../../../scripts/components/FilterGroup.js" defer="true"></script><script type="text/javascript" src="../../../scripts/components/Filter.js" defer="true"></script><script type="text/javascript" src="../../../scripts/data.js" defer="true"></script><link rel="stylesheet" href="../../../css/bootstrap.min.css"></link><link rel="stylesheet" href="../../../css/dottydoc.css"></link><link rel="stylesheet" href="../../../css/color-brewer.css"></link><script type="text/javascript" src="../../../js/jquery.min.js" defer="true"></script><script type="text/javascript" src="../../../js/bootstrap.min.js" defer="true"></script><script>var pathToRoot = "../../../";</script></head><body><div id="container"><div id="leftColumn"><div id="logo"><span><img src="../../../project-logo/logo.svg"></img></span><span><div class="projectName">Scala 3</div></span><span><div class="projectVersion">3.0.0-RC1-bin-20210111-0f1d350-NIGHTLY</div></span></div><div id="paneSearch"></div><nav id="sideMenu2"><div class="expanded"><a href="../../../index.html">Scala 3</a><span></span><div><a href="../../../blog/index.html">Blog</a><span></span><div><a href="../../../blog/2020/12/18/scala3-m3.html">Scala 3.0.0-M3: developer&apos;s preview before RC1</a></div><div><a href="../../../blog/2020/11/09/scala3-m1.html">Scala 3.0.0-M1 is here</a></div><div><a href="../../../blog/2020/09/21/naming-schema-change.html">Dotty becomes Scala 3</a></div><div><a href="../../../blog/2020/08/31/27th-dotty-milestone-release.html">Announcing Dotty 0.27.0-RC1 - ScalaJS, performance, stability</a></div><div><a href="../../../blog/2020/07/27/26th-dotty-milestone-release.html">Announcing Dotty 0.26.0-RC1 - unified extension methods and more</a></div><div><a href="../../../blog/2020/06/22/25th-dotty-milestone-release.html">Announcing Dotty 0.25.0-RC2 - speed-up of givens and change in the tuple API</a></div><div><a href="../../../blog/2020/04/29/24th-dotty-milestone-release.html">Announcing Dotty 0.24.0-RC1 - 2.13.2 standard library, better error messages and more</a></div><div><a href="../../../blog/2020/03/18/23rd-dotty-milestone-release.html">Announcing Dotty 0.23.0-RC1 - safe initialization checks, type-level bitwise operations and more</a></div><div><a href="../../../blog/2020/02/05/22nd-dotty-milestone-release.html">Announcing Dotty 0.22.0-RC1 - syntactic enhancements, type-level arithmetic and more</a></div><div><a href="../../../blog/2019/12/20/21th-dotty-milestone-release.html">Announcing Dotty 0.21.0-RC1 - explicit nulls, new syntax for `match` and conditional givens, and more</a></div><div><a href="../../../blog/2019/11/04/20th-dotty-milestone-release.html">Announcing Dotty 0.20.0-RC1 – `with` starting indentation blocks, inline given specializations and more</a></div><div><a href="../../../blog/2019/09/23/19th-dotty-milestone-release.html">Announcing Dotty 0.19.0-RC1 – further refinements of the syntax and the migration to 2.13.1 standard library</a></div><div><a href="../../../blog/2019/08/30/18th-dotty-milestone-release.html">Announcing Dotty 0.18.1-RC1 – switch to the 2.13 standard library, indentation-based syntax and other experiments</a></div><div><a href="../../../blog/2019/07/25/17th-dotty-milestone-release.html">Announcing Dotty 0.17.0-RC1 – new implicit scoping rules and more</a></div><div><a href="../../../blog/2019/06/11/16th-dotty-milestone-release.html">Announcing Dotty 0.16.0-RC3 – the Scala Days 2019 Release</a></div><div><a href="../../../blog/2019/05/23/15th-dotty-milestone-release.html">Announcing Dotty 0.15.0-RC1 – the fully bootstrapped compiler</a></div><div><a href="../../../blog/2019/04/15/14th-dotty-milestone-release.html">Announcing Dotty 0.14.0-RC1 with export, immutable arrays, creator applications and more</a></div><div><a href="../../../blog/2019/03/05/13th-dotty-milestone-release.html">Announcing Dotty 0.13.0-RC1 with Spark support, top level definitions and redesigned implicits</a></div><div><a href="../../../blog/2019/01/21/12th-dotty-milestone-release.html">Announcing Dotty 0.12.0-RC1</a></div><div><a href="../../../blog/2018/11/30/11th-dotty-milestone-release.html">Announcing Dotty 0.11.0-RC1</a></div><div><a href="../../../blog/2018/10/10/10th-dotty-milestone-release.html">Announcing Dotty 0.10.0-RC1</a></div><div><a href="../../../blog/2018/07/06/ninth-dotty-milestone-release.html">Announcing Dotty 0.9.0-RC1</a></div><div><a href="../../../blog/2018/04/27/eighth-dotty-milestone-release.html">Announcing Dotty 0.7.0 and 0.8.0-RC1</a></div><div><a href="../../../blog/2018/03/05/seventh-dotty-milestone-release.html">Announcing Dotty 0.6.0 and 0.7.0-RC1</a></div><div><a href="../../../blog/2017/12/01/fifth-dotty-milestone-release.html">Announcing Dotty 0.5.0-RC1</a></div><div><a href="../../../blog/2017/10/16/fourth-dotty-milestone-release.html">Announcing Dotty 0.4.0-RC1</a></div><div><a href="../../../blog/2017/09/07/third-dotty-milestone-release.html">Announcing Dotty 0.3.0-RC2</a></div><div><a href="../../../blog/2017/07/12/second-dotty-milestone-release.html">Announcing Dotty 0.2.0-RC1, with new optimizations, improved stability and IDE support</a></div><div><a href="../../../blog/2017/05/31/first-dotty-milestone-release.html">Announcing Dotty 0.1.2-RC1, a major step towards Scala 3</a></div><div><a href="../../../blog/2016/12/05/implicit-function-types.html">Implicit Function Types</a></div><div><a href="../../../blog/2016/05/05/multiversal-equality.html">Multiversal Equality for Scala</a></div><div><a href="../../../blog/2016/02/17/scaling-dot-soundness.html">Scaling DOT to Scala - Soundness</a></div><div><a href="../../../blog/2016/02/03/essence-of-scala.html">The Essence of Scala</a></div><div><a href="../../../blog/2016/01/02/new-year-resolutions.html">New Year Resolutions</a></div><div><a href="../../../blog/2015/10/23/dotty-compiler-bootstraps.html">We got liftoff!</a></div></div><div><a href="../../Usage/index.html">Usage</a><span></span><div><a href="../../usage/getting-started.html">Getting Started: Users</a></div><div><a href="../../usage/sbt-projects.html">Using Dotty with sbt</a></div><div><a href="../../usage/ide-support.html">IDE support for Dotty</a></div><div><a href="../../usage/worksheet-mode.html">Worksheet mode with Dotty IDE</a></div><div><a href="../../usage/language-versions.html">Language Versions</a></div><div><a href="../../usage/cbt-projects.html">Using Dotty with cbt</a></div><div><a href="../../usage/scala3doc/index.html">Scala3doc</a><span></span><div><a href="../../usage/scala3doc/blog.html">Built-in blog</a></div><div><a href="../../usage/scala3doc/specificTags.html">Scala3doc-specific Tags and Features</a></div><div><a href="../../usage/scala3doc/staticSite.html">Static documentation</a></div><div><a href="../../usage/scala3doc/docComments.html">API Documentation</a></div></div><div><a href="../../usage/dottydoc.html">Dottydoc [Legacy]</a></div></div><div class="expanded"><a href="../../Reference/index.html">Reference</a><span></span><div><a href="../overview.html">Overview</a></div><div><a href="../../New Types/index.html">New Types</a><span></span><div><a href="../new-types/intersection-types.html">Intersection Types</a></div><div><a href="../new-types/union-types.html">Union Types</a></div><div><a href="../new-types/type-lambdas.html">Type Lambdas</a></div><div><a href="../new-types/match-types.html">Match Types</a></div><div><a href="../new-types/dependent-function-types.html">Dependent Function Types</a></div><div><a href="../new-types/polymorphic-function-types.html">Polymorphic Function Types</a></div></div><div><a href="../../Enums/index.html">Enums</a><span></span><div><a href="../enums/enums.html">Enumerations</a></div><div><a href="../enums/adts.html">Algebraic Data Types</a></div><div><a href="../enums/desugarEnums.html">Translation of Enums and ADTs</a></div></div><div class="expanded"><a href="../../Contextual Abstractions/index.html">Contextual Abstractions</a><span></span><div><a href="motivation.html">Overview</a></div><div><a href="givens.html">Given Instances</a></div><div><a href="using-clauses.html">Using Clauses</a></div><div><a href="context-bounds.html">Context Bounds</a></div><div><a href="given-imports.html">Importing Givens</a></div><div><a href="" class="selected expanded">Extension Methods</a></div><div><a href="type-classes.html">Implementing Type classes</a></div><div><a href="derivation.html">Type Class Derivation</a></div><div><a href="multiversal-equality.html">Multiversal Equality</a></div><div><a href="context-functions.html">Context Functions</a></div><div><a href="conversions.html">Implicit Conversions</a></div><div><a href="by-name-context-parameters.html">By-Name Context Parameters</a></div><div><a href="relationship-implicits.html">Relationship with Scala 2 Implicits</a></div></div><div><a href="../../Metaprogramming/index.html">Metaprogramming</a><span></span><div><a href="../metaprogramming/toc.html">Overview</a></div><div><a href="../metaprogramming/inline.html">Inline</a></div><div><a href="../metaprogramming/macros.html">Macros</a></div><div><a href="../metaprogramming/staging.html">Multi-Stage Programming</a></div><div><a href="../metaprogramming/tasty-reflect.html">TASTy Reflect</a></div><div><a href="../metaprogramming/tasty-inspect.html">TASTy Inspection</a></div></div><div><a href="../../Other New Features/index.html">Other New Features</a><span></span><div><a href="../other-new-features/trait-parameters.html">Trait Parameters</a></div><div><a href="../other-new-features/transparent-traits.html">Transparent Traits</a></div><div><a href="../other-new-features/creator-applications.html">Universal Apply Methods</a></div><div><a href="../other-new-features/export.html">Export Clauses</a></div><div><a href="../other-new-features/opaques.html">Opaque Type Aliases</a></div><div><a href="../other-new-features/open-classes.html">Open Classes</a></div><div><a href="../other-new-features/parameter-untupling.html">Parameter Untupling</a></div><div><a href="../other-new-features/kind-polymorphism.html">Kind Polymorphism</a></div><div><a href="../other-new-features/matchable.html">The Matchable Trait</a></div><div><a href="../other-new-features/threadUnsafe-annotation.html">The @threadUnsafe annotation</a></div><div><a href="../other-new-features/targetName.html">The @targetName annotation</a></div><div><a href="../other-new-features/control-syntax.html">New Control Syntax</a></div><div><a href="../other-new-features/indentation.html">Optional Braces</a></div><div><a href="../other-new-features/explicit-nulls.html">Explicit Nulls</a></div><div><a href="../other-new-features/safe-initialization.html">Safe Initialization</a></div></div><div><a href="../../Other Changed Features/index.html">Other Changed Features</a><span></span><div><a href="../changed-features/numeric-literals.html">Numeric Literals</a></div><div><a href="../changed-features/structural-types.html">Programmatic Structural Types</a></div><div><a href="../changed-features/operators.html">Rules for Operators</a></div><div><a href="../changed-features/wildcards.html">Wildcard Arguments in Types</a></div><div><a href="../changed-features/type-checking.html">Changes in Type Checking</a></div><div><a href="../changed-features/type-inference.html">Changes in Type Inference</a></div><div><a href="../changed-features/implicit-resolution.html">Changes in Implicit Resolution</a></div><div><a href="../changed-features/implicit-conversions.html">Implicit Conversions</a></div><div><a href="../changed-features/overload-resolution.html">Changes in Overload Resolution</a></div><div><a href="../changed-features/match-syntax.html">Match Expressions</a></div><div><a href="../changed-features/vararg-patterns.html">Vararg Patterns</a></div><div><a href="../changed-features/pattern-bindings.html">Pattern Bindings</a></div><div><a href="../changed-features/pattern-matching.html">Option-less pattern matching</a></div><div><a href="../changed-features/eta-expansion.html">Automatic Eta Expansion</a></div><div><a href="../changed-features/compiler-plugins.html">Changes in Compiler Plugins</a></div><div><a href="../changed-features/lazy-vals-init.html">Lazy Vals initialization</a></div><div><a href="../changed-features/main-functions.html">Main Methods</a></div></div><div><a href="../../Dropped Features/index.html">Dropped Features</a><span></span><div><a href="../dropped-features/delayed-init.html">Dropped: Delayedinit</a></div><div><a href="../dropped-features/macros.html">Dropped: Scala 2 Macros</a></div><div><a href="../dropped-features/existential-types.html">Dropped: Existential Types</a></div><div><a href="../dropped-features/type-projection.html">Dropped: General Type Projection</a></div><div><a href="../dropped-features/do-while.html">Dropped: Do-While</a></div><div><a href="../dropped-features/procedure-syntax.html">Dropped: Procedure Syntax</a></div><div><a href="../dropped-features/package-objects.html">Dropped: Package Objects</a></div><div><a href="../dropped-features/early-initializers.html">Dropped: Early Initializers</a></div><div><a href="../dropped-features/class-shadowing.html">Dropped: Class Shadowing</a></div><div><a href="../dropped-features/limit22.html">Dropped: Limit 22</a></div><div><a href="../dropped-features/xml.html">Dropped: XML Literals</a></div><div><a href="../dropped-features/symlits.html">Dropped: Symbol Literals</a></div><div><a href="../dropped-features/auto-apply.html">Dropped: Auto-Application</a></div><div><a href="../dropped-features/weak-conformance.html">Dropped: Weak Conformance</a></div><div><a href="../dropped-features/nonlocal-returns.html">Deprecated: Nonlocal Returns</a></div><div><a href="../dropped-features/this-qualifier.html">Dropped: private[this] and protected[this]</a></div></div><div><a href="../syntax.html">Scala 3 Syntax Summary</a></div></div><div><a href="../../Contributing/index.html">Contributing</a><span></span><div><a href="../../contributing/contribute-knowledge.html">Contributing Knowledge</a></div><div><a href="../../contributing/getting-started.html">Getting Started</a></div><div><a href="../../contributing/workflow.html">Workflow</a></div><div><a href="../../contributing/testing.html">Testing in Dotty</a></div><div><a href="../../contributing/debugging.html">Debugging Techniques</a></div><div><a href="../../IDEs and Tools/index.html">IDEs and Tools</a><span></span><div><a href="../../contributing/tools/mill.html">Basic Operations with Mill</a></div><div><a href="../../contributing/tools/scalafix.html">Working with Scalafix</a></div></div><div><a href="../../Procedures/index.html">Procedures</a><span></span><div><a href="../../contributing/procedures/release.html">Release Procedure</a></div><div><a href="../../contributing/procedures/vulpix.html">Test Vulpix Framework</a></div></div></div><div><a href="../../Internals/index.html">Internals</a><span></span><div><a href="../../internals/backend.html">Backend Internals</a></div><div><a href="../../internals/classpaths.html">Classpaths</a></div><div><a href="../../internals/core-data-structures.html">Core Data Structures</a></div><div><a href="../../internals/contexts.html">Contexts</a></div><div><a href="../../internals/dotc-scalac.html">Differences between Scalac and Dotty</a></div><div><a href="../../internals/higher-kinded-v2.html">Higher-Kinded Types in Dotty</a></div><div><a href="../../internals/overall-structure.html">Dotty Overall Structure</a></div><div><a href="../../internals/periods.html">Dotc&apos;s concept of time</a></div><div><a href="../../internals/syntax.html">Scala 3 Syntax Summary</a></div><div><a href="../../internals/type-system.html">Type System</a></div><div><a href="../../internals/dotty-internals-1-notes.html">Dotty Internals 1: Trees &amp; Symbols (Meeting Notes)</a></div><div><a href="../../internals/debug-macros.html">Debug Macros</a></div></div><div><a href="../../Resources/index.html">Resources</a><span></span><div><a href="../../resources/talks.html">Talks</a></div></div><div><a href="../../../api/index.html">API</a><span></span><div><a href="../../../api/dotty/tools/tasty.html">dotty.tools.tasty</a></div><div><a href="../../../api/dotty/tools/tasty/util.html">dotty.tools.tasty.util</a></div><div><a href="../../../api/scala.html">scala</a></div><div><a href="../../../api/scala/annotation.html">scala.annotation</a></div><div><a href="../../../api/scala/annotation/meta.html">scala.annotation.meta</a></div><div><a href="../../../api/scala/annotation/unchecked.html">scala.annotation.unchecked</a></div><div><a href="../../../api/scala/beans.html">scala.beans</a></div><div><a href="../../../api/scala/collection.html">scala.collection</a></div><div><a href="../../../api/scala/collection/concurrent.html">scala.collection.concurrent</a></div><div><a href="../../../api/scala/collection/convert.html">scala.collection.convert</a></div><div><a href="../../../api/scala/collection/generic.html">scala.collection.generic</a></div><div><a href="../../../api/scala/collection/immutable.html">scala.collection.immutable</a></div><div><a href="../../../api/scala/collection/mutable.html">scala.collection.mutable</a></div><div><a href="../../../api/scala/compat.html">scala.compat</a></div><div><a href="../../../api/scala/compiletime.html">scala.compiletime</a></div><div><a href="../../../api/scala/compiletime/ops.html">scala.compiletime.ops</a></div><div><a href="../../../api/scala/compiletime/testing.html">scala.compiletime.testing</a></div><div><a href="../../../api/scala/concurrent.html">scala.concurrent</a></div><div><a href="../../../api/scala/concurrent/duration.html">scala.concurrent.duration</a></div><div><a href="../../../api/scala/deriving.html">scala.deriving</a></div><div><a href="../../../api/scala/io.html">scala.io</a></div><div><a href="../../../api/scala/jdk.html">scala.jdk</a></div><div><a href="../../../api/scala/jdk/javaapi.html">scala.jdk.javaapi</a></div><div><a href="../../../api/scala/math.html">scala.math</a></div><div><a href="../../../api/scala/quoted.html">scala.quoted</a></div><div><a href="../../../api/scala/quoted/runtime.html">scala.quoted.runtime</a></div><div><a href="../../../api/scala/ref.html">scala.ref</a></div><div><a href="../../../api/scala/reflect.html">scala.reflect</a></div><div><a href="../../../api/scala/reflect/macros.html">scala.reflect.macros</a></div><div><a href="../../../api/scala/runtime.html">scala.runtime</a></div><div><a href="../../../api/scala/runtime/java8.html">scala.runtime.java8</a></div><div><a href="../../../api/scala/sys.html">scala.sys</a></div><div><a href="../../../api/scala/sys/process.html">scala.sys.process</a></div><div><a href="../../../api/scala/util.html">scala.util</a></div><div><a href="../../../api/scala/util/control.html">scala.util.control</a></div><div><a href="../../../api/scala/util/hashing.html">scala.util.hashing</a></div><div><a href="../../../api/scala/util/matching.html">scala.util.matching</a></div></div></div></nav></div><div id="main"><div id="leftToggler"><span class="icon-toggler"></span></div><div id="searchBar"></div><main>
  <div id="content" pageIds="docs.reference.contextual.extension-methods.md////PointingToDeclaration//2049806133">
    <div class="breadcrumbs"><a href="../../index.html">Scala 3</a>/<a href="../../Reference/index.html">Reference</a>/<a href="../../Contextual Abstractions/index.html">Contextual Abstractions</a>/<a href="">Extension Methods</a></div>
<html>
 <head>
  <link rel="dns-prefetch" href="//fonts.googleapis.com"> 
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin> 
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css"> 
 </head>
 <body>
  <div id="content-wrapper"> 
   <main class="container"> 
    <header> 
     <h1>Extension Methods</h1> 
     <div class="byline"> <a href="https://github.com/lampepfl/dotty/edit/master/docs/docs/reference/contextual/extension-methods.md"> <i class="far fa-edit"></i> Edit this page on GitHub </a> 
     </div> 
    </header> 
    <p>Extension methods allow one to add methods to a type after the type is defined. Example:</p> 
    <pre><code class="language-scala">case class Circle(x: Double, y: Double, radius: Double)

extension (c: Circle)
   def circumference: Double = c.radius * math.Pi * 2
</code></pre> 
    <p>Like regular methods, extension methods can be invoked with infix <code>.</code>:</p> 
    <pre><code class="language-scala">val circle = Circle(0, 0, 1)
circle.circumference
</code></pre> 
    <h3><a href="#translation-of-extension-methods" id="translation-of-extension-methods" class="anchor"></a>Translation of Extension Methods</h3> 
    <p>An extension method translates to a specially labelled method that takes the leading parameter section as its first argument list. The label, expressed as <code>&lt;extension&gt;</code> here, is compiler-internal. So, the definition of <code>circumference</code> above translates to the following method, and can also be invoked as such:</p> 
    <pre><code class="language-scala">&lt;extension&gt; def circumference(c: Circle): Double = c.radius * math.Pi * 2

assert(circle.circumference == circumference(circle))
</code></pre> 
    <h3><a href="#operators" id="operators" class="anchor"></a>Operators</h3> 
    <p>The extension method syntax can also be used to define operators. Examples:</p> 
    <pre><code class="language-scala">extension (x: String)
   def &lt; (y: String): Boolean = ...
extension (x: Elem)
   def +: (xs: Seq[Elem]): Seq[Elem] = ...
extension (x: Number)
   infix def min (y: Number): Number = ...

"ab" &lt; "c"
1 +: List(2, 3)
x min 3
</code></pre> 
    <p>The three definitions above translate to</p> 
    <pre><code class="language-scala">&lt;extension&gt; def &lt; (x: String)(y: String): Boolean = ...
&lt;extension&gt; def +: (xs: Seq[Elem])(x: Elem): Seq[Elem] = ...
&lt;extension&gt; infix def min(x: Number)(y: Number): Number = ...
</code></pre> 
    <p>Note the swap of the two parameters <code>x</code> and <code>xs</code> when translating the right-associative operator <code>+:</code> to an extension method. This is analogous to the implementation of right binding operators as normal methods. The Scala compiler preprocesses an infix operation <code>x +: xs</code> to <code>xs.+:(x)</code>, so the extension method ends up being applied to the sequence as first argument (in other words, the two swaps cancel each other out). See <a href="right-associative-extension-methods.html">here for details</a>.</p> 
    <h3><a href="#generic-extensions" id="generic-extensions" class="anchor"></a>Generic Extensions</h3> 
    <p>It is also possible to extend generic types by adding type parameters to an extension. For instance:</p> 
    <pre><code class="language-scala">extension [T](xs: List[T])
   def second = xs.tail.head

extension [T: Numeric](x: T)
   def + (y: T): T = summon[Numeric[T]].plus(x, y)
</code></pre> 
    <p>Type parameters on extensions can also be combined with type parameters on the methods themselves:</p> 
    <pre><code class="language-scala">extension [T](xs: List[T])
   def sumBy[B](f: A =&gt; B)(using Numeric[B]): B = ...
</code></pre> 
    <p>Type arguments matching method type parameters are passed as usual:</p> 
    <pre><code class="language-scala">List("a", "bb", "ccc").sumBy[Int](_.length)
</code></pre> 
    <p>By contrast, type arguments matching type parameters following <code>extension</code> can be passed only if the method is referenced as a regular method:</p> 
    <pre><code class="language-scala">List[String]("a", "bb", "ccc").sumBy(_.length)
</code></pre> 
    <p>or, passing, both type arguments</p> 
    <pre><code class="language-scala">List[String]("a", "bb", "ccc").sumBy[Int](_.length)
</code></pre> 
    <p>Extensions can also take using clauses. For instance, the <code>+</code> extension above could equivalently be written with a using clause:</p> 
    <pre><code class="language-scala">extension [T](x: T)(using n: Numeric[T])
   def + (y: T): T = n.plus(x, y)
</code></pre> 
    <h3><a href="#collective-extensions" id="collective-extensions" class="anchor"></a>Collective Extensions</h3> 
    <p>Sometimes, one wants to define several extension methods that share the same left-hand parameter type. In this case one can "pull out" the common parameters into a single extension and enclose all methods in braces or an indented region. Example:</p> 
    <pre><code class="language-scala">extension (ss: Seq[String])

   def longestStrings: Seq[String] =
      val maxLength = ss.map(_.length).max
      ss.filter(_.length == maxLength)

   def longestString: String = longestStrings.head
</code></pre> 
    <p>The same can be written with braces as follows (note that indented regions can still be used inside braces):</p> 
    <pre><code class="language-scala">extension (ss: Seq[String]) {

   def longestStrings: Seq[String] = {
      val maxLength = ss.map(_.length).max
      ss.filter(_.length == maxLength)
   }

  def longestString: String = longestStrings.head
}
</code></pre> 
    <p>Note the right-hand side of <code>longestString</code>: it calls <code>longestStrings</code> directly, implicitly assuming the common extended value <code>ss</code> as receiver.</p> 
    <p>Collective extensions like these are a shorthand for individual extensions where each method is defined separately. For instance, the first extension above expands to:</p> 
    <pre><code class="language-scala">extension (ss: Seq[String])
   def longestStrings: Seq[String] =
      val maxLength = ss.map(_.length).max
      ss.filter(_.length == maxLength)

extension (ss: Seq[String])
   def longestString: String = ss.longestStrings.head
</code></pre> 
    <p>Collective extensions also can take type parameters and have using clauses. Example:</p> 
    <pre><code class="language-scala">extension [T](xs: List[T])(using Ordering[T])
   def smallest(n: Int): List[T] = xs.sorted.take(n)
   def smallestIndices(n: Int): List[Int] =
      val limit = smallest(n).max
      xs.zipWithIndex.collect { case (x, i) if x &lt;= limit =&gt; i }
</code></pre> 
    <h3><a href="#translation-of-calls-to-extension-methods" id="translation-of-calls-to-extension-methods" class="anchor"></a>Translation of Calls to Extension Methods</h3> 
    <p>To convert a reference to an extension method, the compiler has to know about the extension method. We say in this case that the extension method is <em>applicable</em> at the point of reference. There are four possible ways for an extension method to be applicable:</p> 
    <ol> 
     <li>The extension method is visible under a simple name, by being defined or inherited or imported in a scope enclosing the reference.</li> 
     <li>The extension method is a member of some given instance that is visible at the point of the reference.</li> 
     <li>The reference is of the form <code>r.m</code> and the extension method is defined in the implicit scope of the type of <code>r</code>.</li> 
     <li>The reference is of the form <code>r.m</code> and the extension method is defined in some given instance in the implicit scope of the type of <code>r</code>.</li> 
    </ol> 
    <p>Here is an example for the first rule:</p> 
    <pre><code class="language-scala">trait IntOps:
   extension (i: Int) def isZero: Boolean = i == 0

   extension (i: Int) def safeMod(x: Int): Option[Int] =
      // extension method defined in same scope IntOps
      if x.isZero then None
      else Some(i % x)

object IntOpsEx extends IntOps:
   extension (i: Int) def safeDiv(x: Int): Option[Int] =
      // extension method brought into scope via inheritance from IntOps
      if x.isZero then None
      else Some(i / x)

trait SafeDiv:
   import IntOpsEx._ // brings safeDiv and safeMod into scope

   extension (i: Int) def divide(d: Int): Option[(Int, Int)] =
      // extension methods imported and thus in scope
      (i.safeDiv(d), i.safeMod(d)) match
         case (Some(d), Some(r)) =&gt; Some((d, r))
         case _ =&gt; None
</code></pre> 
    <p>By the second rule, an extension method can be made available by defining a given instance containing it, like this:</p> 
    <pre><code class="language-scala">given ops1: IntOps with {}  // brings safeMod into scope

1.safeMod(2)
</code></pre> 
    <p>By the third and fourth rule, an extension method is available if it is in the implicit scope of the receiver type or in a given instance in that scope. Example:</p> 
    <pre><code class="language-scala">class List[T]:
   ...
object List:
   ...
   extension [T](xs: List[List[T]])
      def flatten: List[T] = xs.foldLeft(Nil: List[T])(_ ++ _)

   given [T: Ordering]: Ordering[List[T]] with
      extension (xs: List[T])
         def &lt; (ys: List[T]): Boolean = ...
end List

// extension method available since it is in the implicit scope
// of List[List[Int]]
List(List(1, 2), List(3, 4)).flatten

// extension method available since it is in the given Ordering[List[T]],
// which is itself in the implicit scope of List[Int]
List(1, 2) &lt; List(3)
</code></pre> 
    <p>The precise rules for resolving a selection to an extension method are as follows.</p> 
    <p>Assume a selection <code>e.m[Ts]</code> where <code>m</code> is not a member of <code>e</code>, where the type arguments <code>[Ts]</code> are optional, and where <code>T</code> is the expected type. The following two rewritings are tried in order:</p> 
    <ol> 
     <li>The selection is rewritten to <code>m[Ts](e)</code>.</li> 
     <li> <p>If the first rewriting does not typecheck with expected type <code>T</code>, and there is an extension method <code>m</code> in some eligible object <code>o</code>, the selection is rewritten to <code>o.m[Ts](e)</code>. An object <code>o</code> is <em>eligible</em> if</p> 
      <ul> 
       <li><code>o</code> forms part of the implicit scope of <code>T</code>, or</li> 
       <li><code>o</code> is a given instance that is visible at the point of the application, or</li> 
       <li><code>o</code> is a given instance in the implicit scope of <code>T</code>.</li> 
      </ul> <p>This second rewriting is attempted at the time where the compiler also tries an implicit conversion from <code>T</code> to a type containing <code>m</code>. If there is more than one way of rewriting, an ambiguity error results.</p> </li> 
    </ol> 
    <p>An extension method can also be referenced using a simple identifier without a preceding expression. If an identifier <code>g</code> appears in the body of an extension method <code>f</code> and refers to an extension method <code>g</code> that is defined in the same collective extension</p> 
    <pre><code class="language-scala">extension (x: T)
   def f ... = ... g ...
   def g ...
</code></pre> 
    <p>the identifier is rewritten to <code>x.g</code>. This is also the case if <code>f</code> and <code>g</code> are the same method. Example:</p> 
    <pre><code class="language-scala">extension (s: String)
   def position(ch: Char, n: Int): Int =
      if n &lt; s.length &amp;&amp; s(n) != ch then position(ch, n + 1)
      else n
</code></pre> 
    <p>The recursive call <code>position(ch, n + 1)</code> expands to <code>s.position(ch, n + 1)</code> in this case. The whole extension method rewrites to</p> 
    <pre><code class="language-scala">def position(s: String)(ch: Char, n: Int): Int =
   if n &lt; s.length &amp;&amp; s(n) != ch then position(s)(ch, n + 1)
   else n
</code></pre> 
    <h3><a href="#syntax" id="syntax" class="anchor"></a>Syntax</h3> 
    <p>Here are the syntax changes for extension methods and collective extensions relative to the <a href="../syntax.html">current syntax</a>.</p> 
    <pre><code>BlockStat         ::=  ... | Extension
TemplateStat      ::=  ... | Extension
TopStat           ::=  ... | Extension
Extension         ::=  ‘extension’ [DefTypeParamClause] ‘(’ DefParam ‘)’
                       {UsingParamClause} ExtMethods
ExtMethods        ::=  ExtMethod | [nl] ‘{’ ExtMethod {semi ExtMethod ‘}’
ExtMethod         ::=  {Annotation [nl]} {Modifier} ‘def’ DefDef
</code></pre> 
    <p><code>extension</code> is a soft keyword. It is recognized as a keyword only if it appears at the start of a statement and is followed by <code>[</code> or <code>(</code>. In all other cases it is treated as an identifier.</p> 
   </main> 
  </div> 
  <script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'lampepfl/dotty'
  };
</script> 
  <script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
 </body>
</html>  </div>
</main><footer><span class="go-to-top-icon"><a href="#container"><span class="icon-vertical_align_top"></span>&nbsp;Back to top</a></span>Generated by&nbsp;<a href="https://github.com/lampepfl/dotty/tree/master/scala3doc"><img src="../../../images/scala3doc_logo.svg" alt="Scala3doc" class="scala3doc_logo"></img></a></footer></div></div><script type="text/javascript" src="../../../scripts/pages.js"></script><script type="text/javascript" src="../../../scripts/main.js"></script></body></html>
