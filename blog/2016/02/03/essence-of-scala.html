<html><head><meta charset="utf-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><title>The Essence of Scala</title><link rel="shortcut icon" type="image/x-icon" href="../../../../favicon.ico"></link><script type="text/javascript" src="../../../../scripts/clipboard.js" defer="true"></script><script type="text/javascript" src="../../../../scripts/platform-content-handler.js" defer="true"></script><script type="text/javascript" src="../../../../scripts/main.js" defer="true"></script><link rel="stylesheet" href="../../../../styles/nord-light.css"></link><link rel="stylesheet" href="../../../../styles/scalastyle.css"></link><link rel="stylesheet" href="../../../../styles/dotty-icons.css"></link><link rel="stylesheet" href="../../../../styles/diagram.css"></link><link rel="stylesheet" href="../../../../styles/filter-bar.css"></link><link rel="stylesheet" href="../../../../styles/search-bar.css"></link><link rel="stylesheet" href="../../../../styles/scala3doc-searchbar.css"></link><script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js" defer="true"></script><script type="text/javascript" src="https://d3js.org/d3.v6.min.js" defer="true"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/graphlib-dot@0.6.2/dist/graphlib-dot.min.js" defer="true"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dagre-d3/0.6.1/dagre-d3.min.js" defer="true"></script><link rel="stylesheet" href="../../../../styles/filter-bar.css"></link><script type="text/javascript" src="../../../../hljs/highlight.pack.js" defer="true"></script><script type="text/javascript" src="../../../../scripts/hljs-scala3.js" defer="true"></script><script type="text/javascript" src="../../../../scripts/ux.js" defer="true"></script><script type="text/javascript" src="../../../../scripts/common/component.js" defer="true"></script><script type="text/javascript" src="../../../../scripts/common/utils.js" defer="true"></script><script type="text/javascript" src="../../../../scripts/components/FilterBar.js" defer="true"></script><script type="text/javascript" src="../../../../scripts/components/DocumentableList.js" defer="true"></script><script type="text/javascript" src="../../../../scripts/components/Input.js" defer="true"></script><script type="text/javascript" src="../../../../scripts/components/FilterGroup.js" defer="true"></script><script type="text/javascript" src="../../../../scripts/components/Filter.js" defer="true"></script><script type="text/javascript" src="../../../../scripts/data.js" defer="true"></script><script type="text/javascript" src="../../../../scripts/searchbar.js" defer="true"></script><link rel="stylesheet" href="../../../../css/bootstrap.min.css"></link><link rel="stylesheet" href="../../../../css/dottydoc.css"></link><link rel="stylesheet" href="../../../../css/color-brewer.css"></link><script type="text/javascript" src="../../../../js/jquery.min.js" defer="true"></script><script type="text/javascript" src="../../../../js/bootstrap.min.js" defer="true"></script><script>var pathToRoot = "../../../../";</script></head><body><div id="container"><div id="leftColumn"><div id="logo"><span><img src="../../../../project-logo/logo.svg"></img></span><span><div class="projectName">Scala 3</div></span><span><div class="projectVersion">3.0.0-RC1-bin-20210122-6947b0f-NIGHTLY</div></span></div><div id="paneSearch"></div><nav id="sideMenu2"><div class="expanded"><a href="../../../../index.html">Scala 3</a><span></span><div class="expanded"><a href="../../../index.html">Blog</a><span></span><div><a href="../../../2020/12/18/scala3-m3.html">Scala 3.0.0-M3: developer&apos;s preview before RC1</a></div><div><a href="../../../2020/11/09/scala3-m1.html">Scala 3.0.0-M1 is here</a></div><div><a href="../../../2020/09/21/naming-schema-change.html">Dotty becomes Scala 3</a></div><div><a href="../../../2020/08/31/27th-dotty-milestone-release.html">Announcing Dotty 0.27.0-RC1 - ScalaJS, performance, stability</a></div><div><a href="../../../2020/07/27/26th-dotty-milestone-release.html">Announcing Dotty 0.26.0-RC1 - unified extension methods and more</a></div><div><a href="../../../2020/06/22/25th-dotty-milestone-release.html">Announcing Dotty 0.25.0-RC2 - speed-up of givens and change in the tuple API</a></div><div><a href="../../../2020/04/29/24th-dotty-milestone-release.html">Announcing Dotty 0.24.0-RC1 - 2.13.2 standard library, better error messages and more</a></div><div><a href="../../../2020/03/18/23rd-dotty-milestone-release.html">Announcing Dotty 0.23.0-RC1 - safe initialization checks, type-level bitwise operations and more</a></div><div><a href="../../../2020/02/05/22nd-dotty-milestone-release.html">Announcing Dotty 0.22.0-RC1 - syntactic enhancements, type-level arithmetic and more</a></div><div><a href="../../../2019/12/20/21th-dotty-milestone-release.html">Announcing Dotty 0.21.0-RC1 - explicit nulls, new syntax for `match` and conditional givens, and more</a></div><div><a href="../../../2019/11/04/20th-dotty-milestone-release.html">Announcing Dotty 0.20.0-RC1 – `with` starting indentation blocks, inline given specializations and more</a></div><div><a href="../../../2019/09/23/19th-dotty-milestone-release.html">Announcing Dotty 0.19.0-RC1 – further refinements of the syntax and the migration to 2.13.1 standard library</a></div><div><a href="../../../2019/08/30/18th-dotty-milestone-release.html">Announcing Dotty 0.18.1-RC1 – switch to the 2.13 standard library, indentation-based syntax and other experiments</a></div><div><a href="../../../2019/07/25/17th-dotty-milestone-release.html">Announcing Dotty 0.17.0-RC1 – new implicit scoping rules and more</a></div><div><a href="../../../2019/06/11/16th-dotty-milestone-release.html">Announcing Dotty 0.16.0-RC3 – the Scala Days 2019 Release</a></div><div><a href="../../../2019/05/23/15th-dotty-milestone-release.html">Announcing Dotty 0.15.0-RC1 – the fully bootstrapped compiler</a></div><div><a href="../../../2019/04/15/14th-dotty-milestone-release.html">Announcing Dotty 0.14.0-RC1 with export, immutable arrays, creator applications and more</a></div><div><a href="../../../2019/03/05/13th-dotty-milestone-release.html">Announcing Dotty 0.13.0-RC1 with Spark support, top level definitions and redesigned implicits</a></div><div><a href="../../../2019/01/21/12th-dotty-milestone-release.html">Announcing Dotty 0.12.0-RC1</a></div><div><a href="../../../2018/11/30/11th-dotty-milestone-release.html">Announcing Dotty 0.11.0-RC1</a></div><div><a href="../../../2018/10/10/10th-dotty-milestone-release.html">Announcing Dotty 0.10.0-RC1</a></div><div><a href="../../../2018/07/06/ninth-dotty-milestone-release.html">Announcing Dotty 0.9.0-RC1</a></div><div><a href="../../../2018/04/27/eighth-dotty-milestone-release.html">Announcing Dotty 0.7.0 and 0.8.0-RC1</a></div><div><a href="../../../2018/03/05/seventh-dotty-milestone-release.html">Announcing Dotty 0.6.0 and 0.7.0-RC1</a></div><div><a href="../../../2017/12/01/fifth-dotty-milestone-release.html">Announcing Dotty 0.5.0-RC1</a></div><div><a href="../../../2017/10/16/fourth-dotty-milestone-release.html">Announcing Dotty 0.4.0-RC1</a></div><div><a href="../../../2017/09/07/third-dotty-milestone-release.html">Announcing Dotty 0.3.0-RC2</a></div><div><a href="../../../2017/07/12/second-dotty-milestone-release.html">Announcing Dotty 0.2.0-RC1, with new optimizations, improved stability and IDE support</a></div><div><a href="../../../2017/05/31/first-dotty-milestone-release.html">Announcing Dotty 0.1.2-RC1, a major step towards Scala 3</a></div><div><a href="../../12/05/implicit-function-types.html">Implicit Function Types</a></div><div><a href="../../05/05/multiversal-equality.html">Multiversal Equality for Scala</a></div><div><a href="../17/scaling-dot-soundness.html">Scaling DOT to Scala - Soundness</a></div><div><a href="" class="selected expanded">The Essence of Scala</a></div><div><a href="../../01/02/new-year-resolutions.html">New Year Resolutions</a></div><div><a href="../../../2015/10/23/dotty-compiler-bootstraps.html">We got liftoff!</a></div></div><div><a href="../../../../docs/Usage/index.html">Usage</a><span></span><div><a href="../../../../docs/usage/getting-started.html">Getting Started: Users</a></div><div><a href="../../../../docs/usage/sbt-projects.html">Using Dotty with sbt</a></div><div><a href="../../../../docs/usage/ide-support.html">IDE support for Dotty</a></div><div><a href="../../../../docs/usage/worksheet-mode.html">Worksheet mode with Dotty IDE</a></div><div><a href="../../../../docs/usage/language-versions.html">Language Versions</a></div><div><a href="../../../../docs/usage/cbt-projects.html">Using Dotty with cbt</a></div><div><a href="../../../../docs/usage/scala3doc/index.html">Scala3doc</a><span></span><div><a href="../../../../docs/usage/scala3doc/blog.html">Built-in blog</a></div><div><a href="../../../../docs/usage/scala3doc/specificTags.html">Scala3doc-specific Tags and Features</a></div><div><a href="../../../../docs/usage/scala3doc/staticSite.html">Static documentation</a></div><div><a href="../../../../docs/usage/scala3doc/docComments.html">API Documentation</a></div></div><div><a href="../../../../docs/usage/dottydoc.html">Dottydoc [Legacy]</a></div></div><div><a href="../../../../docs/Reference/index.html">Reference</a><span></span><div><a href="../../../../docs/reference/overview.html">Overview</a></div><div><a href="../../../../docs/New Types/index.html">New Types</a><span></span><div><a href="../../../../docs/reference/new-types/intersection-types.html">Intersection Types</a></div><div><a href="../../../../docs/reference/new-types/union-types.html">Union Types</a></div><div><a href="../../../../docs/reference/new-types/type-lambdas.html">Type Lambdas</a></div><div><a href="../../../../docs/reference/new-types/match-types.html">Match Types</a></div><div><a href="../../../../docs/reference/new-types/dependent-function-types.html">Dependent Function Types</a></div><div><a href="../../../../docs/reference/new-types/polymorphic-function-types.html">Polymorphic Function Types</a></div></div><div><a href="../../../../docs/Enums/index.html">Enums</a><span></span><div><a href="../../../../docs/reference/enums/enums.html">Enumerations</a></div><div><a href="../../../../docs/reference/enums/adts.html">Algebraic Data Types</a></div><div><a href="../../../../docs/reference/enums/desugarEnums.html">Translation of Enums and ADTs</a></div></div><div><a href="../../../../docs/Contextual Abstractions/index.html">Contextual Abstractions</a><span></span><div><a href="../../../../docs/reference/contextual/motivation.html">Overview</a></div><div><a href="../../../../docs/reference/contextual/givens.html">Given Instances</a></div><div><a href="../../../../docs/reference/contextual/using-clauses.html">Using Clauses</a></div><div><a href="../../../../docs/reference/contextual/context-bounds.html">Context Bounds</a></div><div><a href="../../../../docs/reference/contextual/given-imports.html">Importing Givens</a></div><div><a href="../../../../docs/reference/contextual/extension-methods.html">Extension Methods</a></div><div><a href="../../../../docs/reference/contextual/type-classes.html">Implementing Type classes</a></div><div><a href="../../../../docs/reference/contextual/derivation.html">Type Class Derivation</a></div><div><a href="../../../../docs/reference/contextual/multiversal-equality.html">Multiversal Equality</a></div><div><a href="../../../../docs/reference/contextual/context-functions.html">Context Functions</a></div><div><a href="../../../../docs/reference/contextual/conversions.html">Implicit Conversions</a></div><div><a href="../../../../docs/reference/contextual/by-name-context-parameters.html">By-Name Context Parameters</a></div><div><a href="../../../../docs/reference/contextual/relationship-implicits.html">Relationship with Scala 2 Implicits</a></div></div><div><a href="../../../../docs/Metaprogramming/index.html">Metaprogramming</a><span></span><div><a href="../../../../docs/reference/metaprogramming/toc.html">Overview</a></div><div><a href="../../../../docs/reference/metaprogramming/inline.html">Inline</a></div><div><a href="../../../../docs/reference/metaprogramming/macros.html">Macros</a></div><div><a href="../../../../docs/reference/metaprogramming/staging.html">Runtime Multi-Stage Programming</a></div><div><a href="../../../../docs/reference/metaprogramming/reflection.html">Reflection</a></div><div><a href="../../../../docs/reference/metaprogramming/tasty-inspect.html">TASTy Inspection</a></div></div><div><a href="../../../../docs/Other New Features/index.html">Other New Features</a><span></span><div><a href="../../../../docs/reference/other-new-features/trait-parameters.html">Trait Parameters</a></div><div><a href="../../../../docs/reference/other-new-features/transparent-traits.html">Transparent Traits</a></div><div><a href="../../../../docs/reference/other-new-features/creator-applications.html">Universal Apply Methods</a></div><div><a href="../../../../docs/reference/other-new-features/export.html">Export Clauses</a></div><div><a href="../../../../docs/reference/other-new-features/opaques.html">Opaque Type Aliases</a></div><div><a href="../../../../docs/reference/other-new-features/open-classes.html">Open Classes</a></div><div><a href="../../../../docs/reference/other-new-features/parameter-untupling.html">Parameter Untupling</a></div><div><a href="../../../../docs/reference/other-new-features/kind-polymorphism.html">Kind Polymorphism</a></div><div><a href="../../../../docs/reference/other-new-features/matchable.html">The Matchable Trait</a></div><div><a href="../../../../docs/reference/other-new-features/threadUnsafe-annotation.html">The @threadUnsafe annotation</a></div><div><a href="../../../../docs/reference/other-new-features/targetName.html">The @targetName annotation</a></div><div><a href="../../../../docs/reference/other-new-features/control-syntax.html">New Control Syntax</a></div><div><a href="../../../../docs/reference/other-new-features/indentation.html">Optional Braces</a></div><div><a href="../../../../docs/reference/other-new-features/explicit-nulls.html">Explicit Nulls</a></div><div><a href="../../../../docs/reference/other-new-features/safe-initialization.html">Safe Initialization</a></div></div><div><a href="../../../../docs/Other Changed Features/index.html">Other Changed Features</a><span></span><div><a href="../../../../docs/reference/changed-features/numeric-literals.html">Numeric Literals</a></div><div><a href="../../../../docs/reference/changed-features/structural-types.html">Programmatic Structural Types</a></div><div><a href="../../../../docs/reference/changed-features/operators.html">Rules for Operators</a></div><div><a href="../../../../docs/reference/changed-features/wildcards.html">Wildcard Arguments in Types</a></div><div><a href="../../../../docs/reference/changed-features/type-checking.html">Changes in Type Checking</a></div><div><a href="../../../../docs/reference/changed-features/type-inference.html">Changes in Type Inference</a></div><div><a href="../../../../docs/reference/changed-features/implicit-resolution.html">Changes in Implicit Resolution</a></div><div><a href="../../../../docs/reference/changed-features/implicit-conversions.html">Implicit Conversions</a></div><div><a href="../../../../docs/reference/changed-features/overload-resolution.html">Changes in Overload Resolution</a></div><div><a href="../../../../docs/reference/changed-features/match-syntax.html">Match Expressions</a></div><div><a href="../../../../docs/reference/changed-features/vararg-patterns.html">Vararg Patterns</a></div><div><a href="../../../../docs/reference/changed-features/pattern-bindings.html">Pattern Bindings</a></div><div><a href="../../../../docs/reference/changed-features/pattern-matching.html">Option-less pattern matching</a></div><div><a href="../../../../docs/reference/changed-features/eta-expansion.html">Automatic Eta Expansion</a></div><div><a href="../../../../docs/reference/changed-features/compiler-plugins.html">Changes in Compiler Plugins</a></div><div><a href="../../../../docs/reference/changed-features/lazy-vals-init.html">Lazy Vals initialization</a></div><div><a href="../../../../docs/reference/changed-features/main-functions.html">Main Methods</a></div></div><div><a href="../../../../docs/Dropped Features/index.html">Dropped Features</a><span></span><div><a href="../../../../docs/reference/dropped-features/delayed-init.html">Dropped: Delayedinit</a></div><div><a href="../../../../docs/reference/dropped-features/macros.html">Dropped: Scala 2 Macros</a></div><div><a href="../../../../docs/reference/dropped-features/existential-types.html">Dropped: Existential Types</a></div><div><a href="../../../../docs/reference/dropped-features/type-projection.html">Dropped: General Type Projection</a></div><div><a href="../../../../docs/reference/dropped-features/do-while.html">Dropped: Do-While</a></div><div><a href="../../../../docs/reference/dropped-features/procedure-syntax.html">Dropped: Procedure Syntax</a></div><div><a href="../../../../docs/reference/dropped-features/package-objects.html">Dropped: Package Objects</a></div><div><a href="../../../../docs/reference/dropped-features/early-initializers.html">Dropped: Early Initializers</a></div><div><a href="../../../../docs/reference/dropped-features/class-shadowing.html">Dropped: Class Shadowing</a></div><div><a href="../../../../docs/reference/dropped-features/limit22.html">Dropped: Limit 22</a></div><div><a href="../../../../docs/reference/dropped-features/xml.html">Dropped: XML Literals</a></div><div><a href="../../../../docs/reference/dropped-features/symlits.html">Dropped: Symbol Literals</a></div><div><a href="../../../../docs/reference/dropped-features/auto-apply.html">Dropped: Auto-Application</a></div><div><a href="../../../../docs/reference/dropped-features/weak-conformance.html">Dropped: Weak Conformance</a></div><div><a href="../../../../docs/reference/dropped-features/nonlocal-returns.html">Deprecated: Nonlocal Returns</a></div><div><a href="../../../../docs/reference/dropped-features/this-qualifier.html">Dropped: private[this] and protected[this]</a></div></div><div><a href="../../../../docs/reference/syntax.html">Scala 3 Syntax Summary</a></div></div><div><a href="../../../../docs/Contributing/index.html">Contributing</a><span></span><div><a href="../../../../docs/contributing/contribute-knowledge.html">Contributing Knowledge</a></div><div><a href="../../../../docs/contributing/getting-started.html">Getting Started</a></div><div><a href="../../../../docs/contributing/workflow.html">Workflow</a></div><div><a href="../../../../docs/contributing/testing.html">Testing in Dotty</a></div><div><a href="../../../../docs/contributing/debugging.html">Debugging Techniques</a></div><div><a href="../../../../docs/IDEs and Tools/index.html">IDEs and Tools</a><span></span><div><a href="../../../../docs/contributing/tools/mill.html">Basic Operations with Mill</a></div><div><a href="../../../../docs/contributing/tools/scalafix.html">Working with Scalafix</a></div></div><div><a href="../../../../docs/Procedures/index.html">Procedures</a><span></span><div><a href="../../../../docs/contributing/procedures/release.html">Release Procedure</a></div><div><a href="../../../../docs/contributing/procedures/vulpix.html">Test Vulpix Framework</a></div></div></div><div><a href="../../../../docs/Internals/index.html">Internals</a><span></span><div><a href="../../../../docs/internals/backend.html">Backend Internals</a></div><div><a href="../../../../docs/internals/classpaths.html">Classpaths</a></div><div><a href="../../../../docs/internals/core-data-structures.html">Core Data Structures</a></div><div><a href="../../../../docs/internals/contexts.html">Contexts</a></div><div><a href="../../../../docs/internals/dotc-scalac.html">Differences between Scalac and Dotty</a></div><div><a href="../../../../docs/internals/higher-kinded-v2.html">Higher-Kinded Types in Dotty</a></div><div><a href="../../../../docs/internals/overall-structure.html">Dotty Overall Structure</a></div><div><a href="../../../../docs/internals/periods.html">Dotc&apos;s concept of time</a></div><div><a href="../../../../docs/internals/syntax.html">Scala 3 Syntax Summary</a></div><div><a href="../../../../docs/internals/type-system.html">Type System</a></div><div><a href="../../../../docs/internals/dotty-internals-1-notes.html">Dotty Internals 1: Trees &amp; Symbols (Meeting Notes)</a></div><div><a href="../../../../docs/internals/debug-macros.html">Debug Macros</a></div></div><div><a href="../../../../docs/Resources/index.html">Resources</a><span></span><div><a href="../../../../docs/resources/talks.html">Talks</a></div></div><div><a href="../../../../api/index.html">API</a><span></span><div><a href="../../../../api/dotty/tools/tasty.html">dotty.tools.tasty</a></div><div><a href="../../../../api/dotty/tools/tasty/util.html">dotty.tools.tasty.util</a></div><div><a href="../../../../api/scala.html">scala</a></div><div><a href="../../../../api/scala/annotation.html">scala.annotation</a></div><div><a href="../../../../api/scala/annotation/meta.html">scala.annotation.meta</a></div><div><a href="../../../../api/scala/annotation/unchecked.html">scala.annotation.unchecked</a></div><div><a href="../../../../api/scala/beans.html">scala.beans</a></div><div><a href="../../../../api/scala/collection.html">scala.collection</a></div><div><a href="../../../../api/scala/collection/concurrent.html">scala.collection.concurrent</a></div><div><a href="../../../../api/scala/collection/convert.html">scala.collection.convert</a></div><div><a href="../../../../api/scala/collection/generic.html">scala.collection.generic</a></div><div><a href="../../../../api/scala/collection/immutable.html">scala.collection.immutable</a></div><div><a href="../../../../api/scala/collection/mutable.html">scala.collection.mutable</a></div><div><a href="../../../../api/scala/compat.html">scala.compat</a></div><div><a href="../../../../api/scala/compiletime.html">scala.compiletime</a></div><div><a href="../../../../api/scala/compiletime/ops.html">scala.compiletime.ops</a></div><div><a href="../../../../api/scala/compiletime/testing.html">scala.compiletime.testing</a></div><div><a href="../../../../api/scala/concurrent.html">scala.concurrent</a></div><div><a href="../../../../api/scala/concurrent/duration.html">scala.concurrent.duration</a></div><div><a href="../../../../api/scala/deriving.html">scala.deriving</a></div><div><a href="../../../../api/scala/io.html">scala.io</a></div><div><a href="../../../../api/scala/jdk.html">scala.jdk</a></div><div><a href="../../../../api/scala/jdk/javaapi.html">scala.jdk.javaapi</a></div><div><a href="../../../../api/scala/math.html">scala.math</a></div><div><a href="../../../../api/scala/quoted.html">scala.quoted</a></div><div><a href="../../../../api/scala/quoted/runtime.html">scala.quoted.runtime</a></div><div><a href="../../../../api/scala/ref.html">scala.ref</a></div><div><a href="../../../../api/scala/reflect.html">scala.reflect</a></div><div><a href="../../../../api/scala/reflect/macros.html">scala.reflect.macros</a></div><div><a href="../../../../api/scala/runtime.html">scala.runtime</a></div><div><a href="../../../../api/scala/runtime/java8.html">scala.runtime.java8</a></div><div><a href="../../../../api/scala/sys.html">scala.sys</a></div><div><a href="../../../../api/scala/sys/process.html">scala.sys.process</a></div><div><a href="../../../../api/scala/util.html">scala.util</a></div><div><a href="../../../../api/scala/util/control.html">scala.util.control</a></div><div><a href="../../../../api/scala/util/hashing.html">scala.util.hashing</a></div><div><a href="../../../../api/scala/util/matching.html">scala.util.matching</a></div></div></div></nav></div><div id="main"><div id="leftToggler"><span class="icon-toggler"></span></div><div id="scala3doc-searchBar"></div><main>
  <div id="content" pageIds="blog._posts.2016-02-03-essence-of-scala.md////PointingToDeclaration//1914399284">
    <div class="breadcrumbs"><a href="../../../../docs/index.html">Scala 3</a>/<a href="../../../index.html">Blog</a>/<a href="">The Essence of Scala</a></div>
<html>
 <head>
  <link rel="dns-prefetch" href="//fonts.googleapis.com"> 
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin> 
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css"> 
 </head>
 <body>
  <div id="content-wrapper"> 
   <main class="container"> 
    <header> 
     <h1>The Essence of Scala</h1> 
     <div class="byline"> <time class="date"> <i class="far fa-calendar-alt"></i> 2016-02-03 </time> <span class="author"> <i class="fas fa-pen-nib"></i> Martin Odersky </span> 
     </div> 
    </header> 
    <p>What do you get if you boil Scala on a slow flame and wait until all incidental features evaporate and only the most concentrated essence remains? After doing this for 8 years we believe we have the answer: it's DOT, the calculus of dependent object types, that underlies Scala.</p> 
    <p>A <a href="http://infoscience.epfl.ch/record/215280">paper on DOT</a> will be presented in April at <a href="http://events.inf.ed.ac.uk/wf2016">Wadlerfest</a>, an event celebrating Phil Wadler's 60th birthday. There's also a prior technical report (<a href="http://arxiv.org/abs/1510.05216">From F to DOT</a>) by Tiark Rompf and Nada Amin describing a slightly different version of the calculus. Each paper describes a proof of type soundness that has been machine-checked for correctness.</p> 
    <h2><a href="#the-dot-calculus" id="the-dot-calculus" class="anchor"></a>The DOT calculus</h2> 
    <p>A calculus is a kind of mini-language that is small enough to be studied formally. Translated to Scala notation, the language covered by DOT is described by the following abstract grammar:</p> 
    <pre><code>Value       v  =  (x: T) =&gt; t            Function
                  new { x: T =&gt; ds }     Object

Definition  d  =  def a = t              Method definition
                  type A = T             Type

Term        t  =  v                      Value
                  x                      Variable
                  t1(t2)                 Application
                  t.a                    Selection
                  { val x = t1; t2 }     Local definition

Type        T  =  Any                    Top type
                  Nothing                Bottom type
                  x.A                    Selection
                  (x: T1) =&gt; T2          Function
                  { def a: T }           Method declaration
                  { type T &gt;: T1 &lt;: T2 } Type declaration
                  T1 &amp; T2                Intersection
                  { x =&gt; T }             Recursion
</code></pre> 
    <p>The grammar uses several kinds of names:</p> 
    <pre><code>x      for (immutable) variables
a      for (parameterless) methods
A      for types
</code></pre> 
    <p>The full calculus adds to this syntax formal <em>typing rules</em> that assign types <code>T</code> to terms <code>t</code> and formal <em>evaluation rules</em> that describe how a program is evaluated. The following <em>type soundness</em> property was shown with a mechanized, (i.e. machine-checked) proof:</p> 
    <blockquote> 
     <p>If a term <code>t</code> has type <code>T</code>, and the evaluation of <code>t</code> terminates, then the result of the evaluation will be a value <code>v</code> of type <code>T</code>.</p> 
    </blockquote> 
    <h2><a href="#difficulties" id="difficulties" class="anchor"></a>Difficulties</h2> 
    <p>Formulating the precise soundness theorem and proving it was unexpectedly hard, because it uncovered some technical challenges that had not been studied in depth before. In DOT - as well as in many programming languages - you can have conflicting definitions. For instance, you might have an abstract type declaration in a base class with two conflicting aliases in subclasses:</p> 
    <pre><code class="language-scala">trait Base { type A }
trait Sub1 extends Base { type A = String }
trait Sub2 extends Base { type A = Int }
trait Bad extends Sub1 with Sub2
</code></pre> 
    <p>Now, if you combine <code>Sub1</code> and <code>Sub2</code> in trait <code>Bad</code> you get a conflict, since the type <code>A</code> is supposed to be equal to both <code>String</code> and <code>Int</code>. If you do not detect the conflict and assume the equalities at face value you get <code>String = A = Int</code>, hence by transitivity <code>String = Int</code>! Once you are that far, you can of course engineer all sorts of situations where a program will typecheck but cause a wrong execution at runtime. In other words, type soundness is violated.</p> 
    <p>Now, the problem is that one cannot always detect these inconsistencies, at least not by a local analysis that does not need to look at the whole program. What's worse, once you have an inconsistent set of definitions you can use these definitions to "prove" their own consistency - much like a mathematical theory that assumes <code>true = false</code> can "prove" every proposition including its own correctness.</p> 
    <p>The crucial reason why type soundness still holds is this: If one compares <code>T</code> with an alias, one does so always relative to some <em>path</em> <code>x</code> that refers to the object containing <code>T</code>. So it's really <code>x.T = Int</code>. Now, we can show that during evaluation every such path refers to some object that was created with a <code>new</code>, and that, furthermore, every such object has consistent type definitions. The tricky bit is to carefully distinguish between the full typing rules, which allow inconsistencies, and the typing rules arising from runtime values, which do not.</p> 
    <h2><a href="#why-is-this-important" id="why-is-this-important" class="anchor"></a>Why is This Important?</h2> 
    <p>There are at least four reasons why insights obtained in the DOT project are important.</p> 
    <ol> 
     <li>They give us a well-founded explanation of <em>nominal typing</em>. Nominal typing means that a type is distinguished from others simply by having a different name. For instance, given two trait definitions <pre><code class="language-scala">trait A extends AnyRef { def f: Int }
trait B extends AnyRef { def f: Int }
</code></pre> <p>we consider <code>A</code> and <code>B</code> to be different types, even though both traits have the same parents and both define the same members. The opposite of nominal typing is structural typing, which treats types that have the same structure as being the same. Most programming languages are at least in part nominal whereas most formal type systems, including DOT, are structural. But the abstract types in DOT provide a way to express nominal types such as classes and traits. The Wadlerfest paper contains examples that show how one can express classes for standard types such as <code>Boolean</code> and <code>List</code> in DOT.</p> </li> 
     <li> <p>They give us a stable basis on which we can study richer languages that resemble Scala more closely. For instance, we can encode type parameters as type members of objects in DOT. This encoding can give us a better understanding of the interactions of subtyping and generics. It can explain why variance rules are the way they are and what the precise typing rules for wildcard parameters <code>[_ &lt;: T]</code>, <code>[_ &gt;: T]</code> should be.</p> </li> 
     <li> <p>DOT also provides a blueprint for Scala compilation. The new Scala compiler <em>Dotty</em> has internal data structures that closely resemble DOT. In particular, type parameters are immediately mapped to type members, in the way we propose to encode them also in the calculus.</p> </li> 
     <li>Finally, the proof principles explored in the DOT work give us guidelines to assess and treat other possible soundness issues. We now know much better what conditions must be fulfilled to ensure type soundness. This lets us put other constructs of the Scala language to the test, either to increase our confidence that they are indeed sound, or to show that they are unsound. In my next blog I will present some of the issues we have discovered through that exercise.</li> 
    </ol> 
    <hr> 
    <footer> 
     <img id="author-img" src="images/martin.jpg"> <span id="author-signature"> Martin Odersky </span> 
    </footer> 
   </main> 
  </div> 
  <script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'lampepfl/dotty'
  };
</script> 
  <script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
 </body>
</html>  </div>
</main><footer><span class="go-to-top-icon"><a href="#container"><span class="icon-vertical_align_top"></span>&nbsp;Back to top</a></span>Generated by&nbsp;<a href="https://github.com/lampepfl/dotty/tree/master/scala3doc"><img src="../../../../images/scala3doc_logo.svg" alt="Scala3doc" class="scala3doc_logo"></img></a></footer></div></div><script type="text/javascript" src="../../../../scripts/pages.js"></script></body></html>
